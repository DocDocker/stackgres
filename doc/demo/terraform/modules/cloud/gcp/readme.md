# Create the Insfratructure with K8S  

## Begin 🚀

_These instructions will allow you to create Cluster Kubernetes in GCP_

### Prerequisite 📋
* Ensure that you have enabled the Google Kubernetes Engine API

[Enable Google Kubernetes engine API](https://console.cloud.google.com/apis/library/container.googleapis.com?q=kubernetes%20engine&_ga=2.224967516.-797693169.1575039274)

* Ensure that you have enabled the Cloud Resource Manager API

[Cloud Resource Manager API](https://console.developers.google.com/apis/api/cloudresourcemanager.googleapis.com/overview?project=1050457845479)
### Installation 🔧
* Install `gcloud`

[Quickstart for Debian and Ubuntu](https://cloud.google.com/sdk/docs/quickstart-debian-ubuntu)

[Quickstart for macOS](https://cloud.google.com/sdk/docs/quickstart-macos)

* Install `kubectl`

[Install and Set Up kubectl](https://kubernetes.io/docs/tasks/tools/install-kubectl/)

* Install `terraform`

> Terraform is packaged as a zip archive

[Terraform](https://learn.hashicorp.com/terraform/getting-started/install.html)

## Platform Deployment with Terraform  ⚙️

*  *Init*: command is used to initialize a working directory containing Terraform configuration files

`terraform init`

* *Plan* : command is used to create an execution plan

`terraform plan -target=module.gcp`

* *Apply* : command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan

`terraform apply -target=module.gcp`

* *Destroy* : command is used to destroy the Terraform-managed infrastructure

`terraform destroy`

[For more information](https://www.terraform.io/docs/commands/index.html)

### Verify connection the Cluster
##### gcloud container clusters get-credentials
`gcloud container clusters get-credentials ${GOOGLE_CLUSTER_NAME}  --zone=${GOOGLE_ZONE}`

> [For more information](https://cloud.google.com/sdk/gcloud/reference/container/clusters/get-credentials?hl=es)

#### Information about cluster

`kubectl cluster-info`

Now, enjoy

[Install Stackgres](https://gitlab.com/ongresinc/stackgres/blob/124-write-stackgres-0-8-documentation/doc/demo/gcloud.md)
